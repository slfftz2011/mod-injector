(()=>{var n,e={171:(n,e,r)=>{"use strict";r.d(e,{A:()=>i});var t=r(354),o=r.n(t),a=r(314),A=r.n(a)()(o());A.push([n.id,"/* 基础样式重置 */\n* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n}\n\nbody {\n    background-color: #f9f9f9;\n    color: #333;\n    line-height: 1.6;\n}\n\n/* 通用按钮样式 */\n.btn {\n    cursor: pointer;\n    border: none;\n    border-radius: 4px;\n    transition: background 0.2s;\n}\n\n/* 响应式适配 */\n@media (max-width: 768px) {\n    .component-list {\n        grid-template-columns: 1fr !important;\n    }\n}","",{version:3,sources:["webpack://./src/styles/global.css"],names:[],mappings:"AAAA,WAAW;AACX;IACI,SAAS;IACT,UAAU;IACV,sBAAsB;IACtB,4DAA4D;AAChE;;AAEA;IACI,yBAAyB;IACzB,WAAW;IACX,gBAAgB;AACpB;;AAEA,WAAW;AACX;IACI,eAAe;IACf,YAAY;IACZ,kBAAkB;IAClB,2BAA2B;AAC/B;;AAEA,UAAU;AACV;IACI;QACI,qCAAqC;IACzC;AACJ",sourcesContent:["/* 基础样式重置 */\r\n* {\r\n    margin: 0;\r\n    padding: 0;\r\n    box-sizing: border-box;\r\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n}\r\n\r\nbody {\r\n    background-color: #f9f9f9;\r\n    color: #333;\r\n    line-height: 1.6;\r\n}\r\n\r\n/* 通用按钮样式 */\r\n.btn {\r\n    cursor: pointer;\r\n    border: none;\r\n    border-radius: 4px;\r\n    transition: background 0.2s;\r\n}\r\n\r\n/* 响应式适配 */\r\n@media (max-width: 768px) {\r\n    .component-list {\r\n        grid-template-columns: 1fr !important;\r\n    }\r\n}"],sourceRoot:""}]);const i=A},217:n=>{n.exports='<div class="component-manager"> <div style="display:flex;justify-content:space-between;align-items:center"> <h2>组件管理</h2> <button id="sync-components" class="btn" style="background:#3498db;color:#fff;padding:.5rem 1rem"> 同步远程组件 </button> </div> <div class="component-filters"> <input type="text" id="component-search" placeholder="搜索组件..."> <select id="component-filter"> <option value="all">全部组件</option> </select> </div> <div class="component-list" id="componentList"> <div style="text-align:center;padding:2rem">加载中...</div> </div> </div>'},365:(n,e,r)=>{"use strict";r.d(e,{A:()=>i});var t=r(354),o=r.n(t),a=r(314),A=r.n(a)()(o());A.push([n.id,'.component-manager {\n    max-width: 1200px;\n    margin: 2rem auto;\n    padding: 0 1rem;\n}\n\n.component-filters {\n    display: flex;\n    gap: 1rem;\n    margin: 1.5rem 0;\n    flex-wrap: wrap;\n}\n\n#component-search {\n    flex: 1;\n    min-width: 200px;\n    padding: 0.5rem;\n    border: 1px solid #ddd;\n    border-radius: 4px;\n}\n\n#component-filter {\n    padding: 0.5rem;\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    background: transparent;\n}\n\n.component-list {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n    gap: 1.5rem;\n    margin-top: 2rem;\n}\n\n.component-card {\n    border: 1px solid #e0e0e0;\n    border-radius: 8px;\n    padding: 1.2rem;\n    transition: all 0.3s ease;\n    cursor: pointer; /* 提示可点击 */\n}\n\n.component-card:hover {\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.component-card h3 {\n    margin: 0 0 0.5rem 0;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\n.component-version {\n    font-size: 0.8rem;\n    color: #666;\n}\n\n.component-desc {\n    color: #555;\n    margin: 0.8rem 0;\n    font-size: 0.95rem;\n    line-height: 1.5;\n}\n\n.component-actions {\n    margin-top: 1rem;\n}\n\n.component-btn {\n    padding: 0.4rem 0.8rem;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    font-size: 0.9rem;\n    transition: background 0.2s;\n}\n\n.detail-btn {\n    background: #3498db;\n    color: white;\n}\n\n/* 修改模态框背景透明度和内容区样式 */\n.modal {\n    display: none;\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.7); /* 加深背景透明度 */\n    z-index: 1000;\n    align-items: center;\n    justify-content: center;\n}\n\n.modal-content {\n    background: #fff; /* 确保纯白背景 */\n    padding: 2rem;\n    border-radius: 8px;\n    width: 90%;\n    max-width: 500px;\n    position: relative;\n    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); /* 增加阴影增强立体感 */\n    transform: translateY(-20px); /* 轻微上浮效果 */\n    transition: transform 0.3s ease;\n}\n\n/* 显示模态框时的动画 */\n.modal.active .modal-content {\n    transform: translateY(0);\n}\n\n.close-btn {\n    position: absolute;\n    top: 1rem;\n    right: 1rem;\n    font-size: 1.5rem;\n    cursor: pointer;\n}\n\n.cop-branches {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 0.5rem;\n    margin: 1rem 0;\n}\n\n.cop-download {\n    background: #4CAF50;\n    color: white;\n    padding: 0.5rem 1rem;\n    border-radius: 4px;\n    text-decoration: none;\n    font-size: 0.9rem;\n}\n\n.component-readme {\n    margin: 1rem 0;\n    padding: 1rem;\n    background: #f5f5f5;\n    border-radius: 4px;\n    white-space: pre-line;\n}\n\n/* 深色模式适配 */\n[data-theme="dark"] .component-card {\n    border-color: #333;\n}\n\n[data-theme="dark"] .component-desc,\n[data-theme="dark"] .component-version {\n    color: #bbb;\n}\n\n[data-theme="dark"] #component-search,\n[data-theme="dark"] #component-filter {\n    border-color: #444;\n    background: #222;\n    color: #fff;\n}\n\n[data-theme="dark"] .component-readme {\n    background: #333;\n}\n\n/* 版本分支样式 */\n.component-version {\n    cursor: pointer; /* 显示手型光标，提示可点击 */\n    display: inline-flex;\n    align-items: center;\n    gap: 0.3rem;\n}\n\n.version-branch {\n    font-size: 0.7rem;\n    transition: transform 0.2s;\n}\n\n.component-version:hover .version-branch {\n    transform: rotate(180deg);\n}\n\n/* 版本分支弹窗 */\n.version-branch-modal {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.7);\n    z-index: 1001;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.version-branch-modal .modal-content {\n    background: white;\n    padding: 1.5rem;\n    border-radius: 8px;\n    min-width: 250px;\n}\n\n.version-branch-modal ul {\n    list-style: none;\n    padding: 0;\n    margin: 1rem 0;\n}\n\n.version-branch-modal li {\n    padding: 0.5rem;\n    border-bottom: 1px solid #eee;\n    cursor: pointer;\n}\n\n.version-branch-modal li:hover {\n    background: #f5f5f5;\n}',"",{version:3,sources:["webpack://./src/components/component-manager.css"],names:[],mappings:"AAAA;IACI,iBAAiB;IACjB,iBAAiB;IACjB,eAAe;AACnB;;AAEA;IACI,aAAa;IACb,SAAS;IACT,gBAAgB;IAChB,eAAe;AACnB;;AAEA;IACI,OAAO;IACP,gBAAgB;IAChB,eAAe;IACf,sBAAsB;IACtB,kBAAkB;AACtB;;AAEA;IACI,eAAe;IACf,sBAAsB;IACtB,kBAAkB;IAClB,uBAAuB;AAC3B;;AAEA;IACI,aAAa;IACb,4DAA4D;IAC5D,WAAW;IACX,gBAAgB;AACpB;;AAEA;IACI,yBAAyB;IACzB,kBAAkB;IAClB,eAAe;IACf,yBAAyB;IACzB,eAAe,EAAE,UAAU;AAC/B;;AAEA;IACI,yCAAyC;AAC7C;;AAEA;IACI,oBAAoB;IACpB,aAAa;IACb,8BAA8B;IAC9B,mBAAmB;AACvB;;AAEA;IACI,iBAAiB;IACjB,WAAW;AACf;;AAEA;IACI,WAAW;IACX,gBAAgB;IAChB,kBAAkB;IAClB,gBAAgB;AACpB;;AAEA;IACI,gBAAgB;AACpB;;AAEA;IACI,sBAAsB;IACtB,YAAY;IACZ,kBAAkB;IAClB,eAAe;IACf,iBAAiB;IACjB,2BAA2B;AAC/B;;AAEA;IACI,mBAAmB;IACnB,YAAY;AAChB;;AAEA,qBAAqB;AACrB;IACI,aAAa;IACb,eAAe;IACf,MAAM;IACN,OAAO;IACP,WAAW;IACX,YAAY;IACZ,8BAA8B,EAAE,YAAY;IAC5C,aAAa;IACb,mBAAmB;IACnB,uBAAuB;AAC3B;;AAEA;IACI,gBAAgB,EAAE,WAAW;IAC7B,aAAa;IACb,kBAAkB;IAClB,UAAU;IACV,gBAAgB;IAChB,kBAAkB;IAClB,0CAA0C,EAAE,cAAc;IAC1D,4BAA4B,EAAE,WAAW;IACzC,+BAA+B;AACnC;;AAEA,cAAc;AACd;IACI,wBAAwB;AAC5B;;AAEA;IACI,kBAAkB;IAClB,SAAS;IACT,WAAW;IACX,iBAAiB;IACjB,eAAe;AACnB;;AAEA;IACI,aAAa;IACb,eAAe;IACf,WAAW;IACX,cAAc;AAClB;;AAEA;IACI,mBAAmB;IACnB,YAAY;IACZ,oBAAoB;IACpB,kBAAkB;IAClB,qBAAqB;IACrB,iBAAiB;AACrB;;AAEA;IACI,cAAc;IACd,aAAa;IACb,mBAAmB;IACnB,kBAAkB;IAClB,qBAAqB;AACzB;;AAEA,WAAW;AACX;IACI,kBAAkB;AACtB;;AAEA;;IAEI,WAAW;AACf;;AAEA;;IAEI,kBAAkB;IAClB,gBAAgB;IAChB,WAAW;AACf;;AAEA;IACI,gBAAgB;AACpB;;AAEA,WAAW;AACX;IACI,eAAe,EAAE,iBAAiB;IAClC,oBAAoB;IACpB,mBAAmB;IACnB,WAAW;AACf;;AAEA;IACI,iBAAiB;IACjB,0BAA0B;AAC9B;;AAEA;IACI,yBAAyB;AAC7B;;AAEA,WAAW;AACX;IACI,eAAe;IACf,MAAM;IACN,OAAO;IACP,WAAW;IACX,YAAY;IACZ,8BAA8B;IAC9B,aAAa;IACb,aAAa;IACb,mBAAmB;IACnB,uBAAuB;AAC3B;;AAEA;IACI,iBAAiB;IACjB,eAAe;IACf,kBAAkB;IAClB,gBAAgB;AACpB;;AAEA;IACI,gBAAgB;IAChB,UAAU;IACV,cAAc;AAClB;;AAEA;IACI,eAAe;IACf,6BAA6B;IAC7B,eAAe;AACnB;;AAEA;IACI,mBAAmB;AACvB",sourcesContent:['.component-manager {\r\n    max-width: 1200px;\r\n    margin: 2rem auto;\r\n    padding: 0 1rem;\r\n}\r\n\r\n.component-filters {\r\n    display: flex;\r\n    gap: 1rem;\r\n    margin: 1.5rem 0;\r\n    flex-wrap: wrap;\r\n}\r\n\r\n#component-search {\r\n    flex: 1;\r\n    min-width: 200px;\r\n    padding: 0.5rem;\r\n    border: 1px solid #ddd;\r\n    border-radius: 4px;\r\n}\r\n\r\n#component-filter {\r\n    padding: 0.5rem;\r\n    border: 1px solid #ddd;\r\n    border-radius: 4px;\r\n    background: transparent;\r\n}\r\n\r\n.component-list {\r\n    display: grid;\r\n    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\r\n    gap: 1.5rem;\r\n    margin-top: 2rem;\r\n}\r\n\r\n.component-card {\r\n    border: 1px solid #e0e0e0;\r\n    border-radius: 8px;\r\n    padding: 1.2rem;\r\n    transition: all 0.3s ease;\r\n    cursor: pointer; /* 提示可点击 */\r\n}\r\n\r\n.component-card:hover {\r\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.component-card h3 {\r\n    margin: 0 0 0.5rem 0;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n}\r\n\r\n.component-version {\r\n    font-size: 0.8rem;\r\n    color: #666;\r\n}\r\n\r\n.component-desc {\r\n    color: #555;\r\n    margin: 0.8rem 0;\r\n    font-size: 0.95rem;\r\n    line-height: 1.5;\r\n}\r\n\r\n.component-actions {\r\n    margin-top: 1rem;\r\n}\r\n\r\n.component-btn {\r\n    padding: 0.4rem 0.8rem;\r\n    border: none;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n    font-size: 0.9rem;\r\n    transition: background 0.2s;\r\n}\r\n\r\n.detail-btn {\r\n    background: #3498db;\r\n    color: white;\r\n}\r\n\r\n/* 修改模态框背景透明度和内容区样式 */\r\n.modal {\r\n    display: none;\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: rgba(0, 0, 0, 0.7); /* 加深背景透明度 */\r\n    z-index: 1000;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n\r\n.modal-content {\r\n    background: #fff; /* 确保纯白背景 */\r\n    padding: 2rem;\r\n    border-radius: 8px;\r\n    width: 90%;\r\n    max-width: 500px;\r\n    position: relative;\r\n    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); /* 增加阴影增强立体感 */\r\n    transform: translateY(-20px); /* 轻微上浮效果 */\r\n    transition: transform 0.3s ease;\r\n}\r\n\r\n/* 显示模态框时的动画 */\r\n.modal.active .modal-content {\r\n    transform: translateY(0);\r\n}\r\n\r\n.close-btn {\r\n    position: absolute;\r\n    top: 1rem;\r\n    right: 1rem;\r\n    font-size: 1.5rem;\r\n    cursor: pointer;\r\n}\r\n\r\n.cop-branches {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    gap: 0.5rem;\r\n    margin: 1rem 0;\r\n}\r\n\r\n.cop-download {\r\n    background: #4CAF50;\r\n    color: white;\r\n    padding: 0.5rem 1rem;\r\n    border-radius: 4px;\r\n    text-decoration: none;\r\n    font-size: 0.9rem;\r\n}\r\n\r\n.component-readme {\r\n    margin: 1rem 0;\r\n    padding: 1rem;\r\n    background: #f5f5f5;\r\n    border-radius: 4px;\r\n    white-space: pre-line;\r\n}\r\n\r\n/* 深色模式适配 */\r\n[data-theme="dark"] .component-card {\r\n    border-color: #333;\r\n}\r\n\r\n[data-theme="dark"] .component-desc,\r\n[data-theme="dark"] .component-version {\r\n    color: #bbb;\r\n}\r\n\r\n[data-theme="dark"] #component-search,\r\n[data-theme="dark"] #component-filter {\r\n    border-color: #444;\r\n    background: #222;\r\n    color: #fff;\r\n}\r\n\r\n[data-theme="dark"] .component-readme {\r\n    background: #333;\r\n}\r\n\r\n/* 版本分支样式 */\r\n.component-version {\r\n    cursor: pointer; /* 显示手型光标，提示可点击 */\r\n    display: inline-flex;\r\n    align-items: center;\r\n    gap: 0.3rem;\r\n}\r\n\r\n.version-branch {\r\n    font-size: 0.7rem;\r\n    transition: transform 0.2s;\r\n}\r\n\r\n.component-version:hover .version-branch {\r\n    transform: rotate(180deg);\r\n}\r\n\r\n/* 版本分支弹窗 */\r\n.version-branch-modal {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: rgba(0, 0, 0, 0.7);\r\n    z-index: 1001;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n\r\n.version-branch-modal .modal-content {\r\n    background: white;\r\n    padding: 1.5rem;\r\n    border-radius: 8px;\r\n    min-width: 250px;\r\n}\r\n\r\n.version-branch-modal ul {\r\n    list-style: none;\r\n    padding: 0;\r\n    margin: 1rem 0;\r\n}\r\n\r\n.version-branch-modal li {\r\n    padding: 0.5rem;\r\n    border-bottom: 1px solid #eee;\r\n    cursor: pointer;\r\n}\r\n\r\n.version-branch-modal li:hover {\r\n    background: #f5f5f5;\r\n}'],sourceRoot:""}]);const i=A},483:(n,e,r)=>{"use strict";var t=r(72),o=r.n(t),a=r(825),A=r.n(a),i=r(659),s=r.n(i),d=r(56),c=r.n(d),m=r(540),l=r.n(m),p=r(113),g=r.n(p),B=r(171),C={};C.styleTagTransform=g(),C.setAttributes=c(),C.insert=s().bind(null,"head"),C.domAPI=A(),C.insertStyleElement=l();o()(B.A,C);B.A&&B.A.locals&&B.A.locals;var h=r(939),u={};u.styleTagTransform=g(),u.setAttributes=c(),u.insert=s().bind(null,"head"),u.domAPI=A(),u.insertStyleElement=l();o()(h.A,u);h.A&&h.A.locals&&h.A.locals;var I=r(365),f={};f.styleTagTransform=g(),f.setAttributes=c(),f.insert=s().bind(null,"head"),f.domAPI=A(),f.insertStyleElement=l();o()(I.A,f);I.A&&I.A.locals&&I.A.locals;var b=r(217),y=r.n(b);const v=r(83).A.create({timeout:1e4,headers:{"Content-Type":"application/json"}});v.interceptors.response.use(n=>{if("text"===n.config.responseType)return{success:!0,data:n.data};const{code:e,data:r,message:t}=n.data;return 200===e||void 0===e?{success:!0,data:r||n.data,message:t||"请求成功"}:{success:!1,message:t||"请求失败"}},n=>{let e="网络请求失败";return n.response?e=`请求失败（${n.response.status}）`:n.request&&(e="服务器无响应"),{success:!1,message:e,error:n}});const w=v,x="/mod-injector/components";var E=r(790),k=r.n(E);k().config({name:"NeteaseModInjector",storeName:"components"});const L="lastSyncTime",$=async n=>{await k().setItem(L,n)};class j{constructor(){this.components=[],this.isLoading=!1}async init(){this.setLoading(!0);try{await this.loadComponents(),this.renderComponentList(),this.bindEvents(),this.updateLastSyncTime()}catch(n){this.renderError(`加载失败: ${n.message}`)}finally{this.setLoading(!1)}}async loadComponents(){const n=await(async()=>{try{const{success:n,data:e}=await w.get(`${x}/components-index.json`);if(!n)throw new Error("获取组件列表索引失败");return Array.isArray(e)?e:[]}catch(n){throw new Error(`获取组件列表失败: ${n.message}`)}})();this.components=await Promise.all(n.map(async n=>{const e=await(async n=>{if(!n)throw new Error("组件文件夹名称不能为空");try{const{success:e,data:r}=await w.get(`${x}/${n}/meta.json`);if(!e)throw new Error("获取组件元信息失败");return["author","version","displayName","copNames"].forEach(n=>{if(void 0===r[n])throw new Error(`meta.json 缺少必要字段: ${n}`)}),r}catch(n){throw new Error(`获取组件信息失败: ${n.message}`)}})(n);return{...e,folderName:n}}))}async syncComponents(){if(!this.isLoading){this.setLoading(!0);try{await this.loadComponents(),await $(Date.now()),this.updateLastSyncTime(),this.renderComponentList()}catch(n){alert(`同步失败: ${n.message}`)}finally{this.setLoading(!1)}}}async updateLastSyncTime(){const n=await(async()=>await k().getItem(L)||0)();document.getElementById("sync-components").textContent=n?`最后同步: ${new Date(n).toLocaleString()}`:"同步组件列表"}renderComponentList(){const n=document.getElementById("componentList");if(!n)return;const e=document.getElementById("component-search").value.toLowerCase(),r=this.components.filter(n=>n.displayName.toLowerCase().includes(e)||n.description?.toLowerCase().includes(e));n.innerHTML=r.length?r.map(n=>this.createComponentCard(n)).join(""):'<div style="text-align: center; padding: 2rem;">暂无匹配组件</div>'}createComponentCard(n){return`\n      <div class="component-card" data-folder="${n.folderName}">\n        <h3>${n.displayName}</h3>\n        <p class="component-desc">${n.description||"无描述"}</p>\n        <div style="font-size: 0.8rem; color: #666;">\n          作者: ${n.author} | 主版本: ${n.version}\n        </div>\n        <button class="component-btn detail-btn" data-folder="${n.folderName}">\n          查看版本分支\n        </button>\n      </div>\n    `}async showComponentDetail(n){try{const e=this.components.find(e=>e.folderName===n),r=await(async n=>{if(!n)throw new Error("组件文件夹名称不能为空");try{const e=await w.get(`${x}/${n}/README.md`,{responseType:"text"});return e.success?e.data:e}catch(n){return"该组件暂无说明文档"}})(n),t=`\n        <div class="modal-content">\n          <span class="close-btn">&times;</span>\n          <h2>${e.displayName}</h2>\n          <p>作者: ${e.author} | 主版本: ${e.version}</p>\n          \n          <h3>可用版本分支（点击下载）</h3>\n          <div class="cop-branches">\n            ${e.copNames.map(e=>`\n              <a href="${((n,e)=>n&&e?`${x}/${n}/${e}`:"")(n,e)}" \n                 download \n                 class="cop-download-btn">\n                ${e}\n              </a>\n            `).join("")}\n          </div>\n          \n          <h3>组件说明</h3>\n          <div class="component-readme">${this.formatReadme(r)}</div>\n        </div>\n      `,o=document.createElement("div");o.className="modal",o.innerHTML=t,document.body.appendChild(o),o.style.display="flex",o.querySelector(".close-btn").addEventListener("click",()=>{document.body.removeChild(o)})}catch(n){alert(`加载详情失败: ${n.message}`)}}async installComponent(n){const e=this.components.find(e=>e.id===n);if(e)try{let r;if(!e.required){const{success:e,data:t,message:o}=await getComponentDownloadUrl(n);if(!e||!t)throw new Error(o||"获取下载链接失败（链接为空）");r=t}if(r){const n=await fetch(r);if(!n.ok)throw new Error(`下载失败: HTTP ${n.status}`);const t=n.headers.get("content-length");if(!t||parseInt(t)<=0)throw new Error("下载的文件为空");const o=await n.blob(),a=window.URL.createObjectURL(o),A=document.createElement("a");A.href=a,A.download=`${e.name}-v${e.version}.zip`,document.body.appendChild(A),A.click(),window.URL.revokeObjectURL(a),document.body.removeChild(A)}this.installedComponents.push({...e,enabled:!0}),await saveInstalledComponents(this.installedComponents),this.renderComponentList(),alert(`组件《${e.name}》安装成功`)}catch(n){alert(`安装失败: ${n.message}`)}else alert("组件不存在")}formatReadme(n){return n?n.replace(/\n/g,"<br>"):"暂无说明文档"}bindEvents(){const n=document.getElementById("componentList"),e=document.getElementById("installModal"),r=e?.querySelector(".close-btn"),t=document.getElementById("confirm-install"),o=document.getElementById("component-url");n.addEventListener("click",async n=>{if(n.target.classList.contains("install-btn")){const e=n.target.dataset.id,r=this.components.find(n=>n.id===e);r&&(o.value=r.id),this.toggleModal(!0)}if(n.target.classList.contains("enable-btn")||n.target.classList.contains("disable-btn")){const e=n.target.dataset.id;await this.toggleComponentStatus(e)}if(n.target.classList.contains("uninstall-btn")){const e=n.target.dataset.id;confirm("确定要卸载此组件吗？")&&await this.uninstallComponent(e)}document.getElementById("componentList").addEventListener("click",n=>{if(n.target.closest(".component-version")||n.target.classList.contains("version-branch")){const e=n.target.closest(".component-version"),r=e.dataset.id,t=JSON.parse(e.dataset.versions);this.showVersionBranch(r,t)}})}),document.getElementById("component-search").addEventListener("input",()=>this.renderComponentList()),document.getElementById("component-filter").addEventListener("change",()=>this.renderComponentList()),r?.addEventListener("click",()=>{this.toggleModal(!1),o.value=""}),e?.addEventListener("click",n=>{n.target===e&&(this.toggleModal(!1),o.value="")}),t?.addEventListener("click",async()=>{const n=o.value.trim();if(!n)return void alert("请输入组件ID或URL");n.startsWith("http")?await this.installComponentByUrl(n):await this.installComponent(n),this.toggleModal(!1),o.value=""}),document.getElementById("sync-components")?.addEventListener("click",async()=>{const n=document.getElementById("sync-components");n.disabled=!0,n.textContent="同步中...";try{await new Promise(n=>setTimeout(n,1500)),alert("组件同步完成"),this.renderComponentList(),await $(Date.now())}catch(n){alert("同步失败，请稍后重试")}finally{n.disabled=!1,n.textContent="同步远程组件"}})}showVersionBranch(n,e){const r=document.createElement("div");r.className="version-branch-modal",r.innerHTML=`\n    <div class="modal-content">\n      <h3>版本分支</h3>\n      <ul>\n        ${e.map(n=>`\n          <li data-version="${n}">${n}</li>\n        `).join("")}\n      </ul>\n    </div>\n  `,document.body.appendChild(r),r.querySelectorAll("li").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.version;alert(`选择了 ${n} 的版本: ${t}`),document.body.removeChild(r)})})}toggleModal(n){const e=document.getElementById("installModal");e&&(e.style.display=n?"flex":"none",e.classList.toggle("active",n))}async installComponentByUrl(n){try{const n="url-comp-"+Date.now().toString(36).slice(-6);if(this.installedComponents.some(e=>e.id===n))return void alert("该组件已安装");const e={id:n,name:"自定义URL组件",description:"通过外部URL安装的组件",version:"1.0.0",size:"未知",updateTime:(new Date).toISOString().split("T")[0],required:!1};this.components.push(e),this.installedComponents.push({...e,enabled:!0}),await saveInstalledComponents(this.installedComponents),this.renderComponentList(),alert("组件安装成功")}catch(n){alert(`安装失败: ${n.message}`)}}setLoading(n){this.isLoading=n;const e=document.getElementById("componentList"),r=document.getElementById("sync-components");n?(e.innerHTML='<div style="text-align: center; padding: 2rem;">加载中...</div>',r.disabled=!0):r.disabled=!1}renderError(n){document.getElementById("componentList").innerHTML=`\n      <div style="text-align: center; padding: 2rem; color: #e74c3c;">\n        ${n}\n        <button class="component-btn retry-btn">重试</button>\n      </div>\n    `,document.querySelector(".retry-btn").addEventListener("click",()=>this.init())}}document.addEventListener("DOMContentLoaded",async function(){try{const n=document.getElementById("componentManagerContainer");if(!n)throw new Error("未找到组件容器（componentManagerContainer）");n.innerHTML=y(),await(async()=>{const n=new j;return await n.init(),n})()}catch(n){document.body.innerHTML=`<div style="padding: 2rem; color: red;">加载失败: ${n.message}</div>`}})},939:(n,e,r)=>{"use strict";r.d(e,{A:()=>i});var t=r(354),o=r.n(t),a=r(314),A=r.n(a)()(o());A.push([n.id,".site-footer {\n    background: #2c3e50;\n    color: #ecf0f1;\n    padding: 2rem 1rem;\n    margin-top: 3rem;\n}\n\n.footer-content {\n    max-width: 1200px;\n    margin: 0 auto;\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n    gap: 2rem;\n}\n\n.footer-section h3 {\n    color: #3498db;\n    margin-bottom: 1rem;\n    font-size: 1.2rem;\n}\n\n.footer-section p {\n    color: #bdc3c7;\n    line-height: 1.6;\n}\n\n.footer-section ul {\n    list-style: none;\n    padding: 0;\n}\n\n.footer-section a {\n    color: #bdc3c7;\n    text-decoration: none;\n    transition: color 0.3s;\n    display: block;\n    margin: 0.5rem 0;\n}\n\n.footer-section a:hover {\n    color: #3498db;\n}\n\n.footer-bottom {\n    text-align: center;\n    padding-top: 2rem;\n    margin-top: 2rem;\n    border-top: 1px solid #34495e;\n    color: #95a5a6;\n    font-size: 0.9rem;\n}","",{version:3,sources:["webpack://./src/styles/footer.css"],names:[],mappings:"AAAA;IACI,mBAAmB;IACnB,cAAc;IACd,kBAAkB;IAClB,gBAAgB;AACpB;;AAEA;IACI,iBAAiB;IACjB,cAAc;IACd,aAAa;IACb,2DAA2D;IAC3D,SAAS;AACb;;AAEA;IACI,cAAc;IACd,mBAAmB;IACnB,iBAAiB;AACrB;;AAEA;IACI,cAAc;IACd,gBAAgB;AACpB;;AAEA;IACI,gBAAgB;IAChB,UAAU;AACd;;AAEA;IACI,cAAc;IACd,qBAAqB;IACrB,sBAAsB;IACtB,cAAc;IACd,gBAAgB;AACpB;;AAEA;IACI,cAAc;AAClB;;AAEA;IACI,kBAAkB;IAClB,iBAAiB;IACjB,gBAAgB;IAChB,6BAA6B;IAC7B,cAAc;IACd,iBAAiB;AACrB",sourcesContent:[".site-footer {\r\n    background: #2c3e50;\r\n    color: #ecf0f1;\r\n    padding: 2rem 1rem;\r\n    margin-top: 3rem;\r\n}\r\n\r\n.footer-content {\r\n    max-width: 1200px;\r\n    margin: 0 auto;\r\n    display: grid;\r\n    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\r\n    gap: 2rem;\r\n}\r\n\r\n.footer-section h3 {\r\n    color: #3498db;\r\n    margin-bottom: 1rem;\r\n    font-size: 1.2rem;\r\n}\r\n\r\n.footer-section p {\r\n    color: #bdc3c7;\r\n    line-height: 1.6;\r\n}\r\n\r\n.footer-section ul {\r\n    list-style: none;\r\n    padding: 0;\r\n}\r\n\r\n.footer-section a {\r\n    color: #bdc3c7;\r\n    text-decoration: none;\r\n    transition: color 0.3s;\r\n    display: block;\r\n    margin: 0.5rem 0;\r\n}\r\n\r\n.footer-section a:hover {\r\n    color: #3498db;\r\n}\r\n\r\n.footer-bottom {\r\n    text-align: center;\r\n    padding-top: 2rem;\r\n    margin-top: 2rem;\r\n    border-top: 1px solid #34495e;\r\n    color: #95a5a6;\r\n    font-size: 0.9rem;\r\n}"],sourceRoot:""}]);const i=A}},r={};function t(n){var o=r[n];if(void 0!==o)return o.exports;var a=r[n]={id:n,exports:{}};return e[n](a,a.exports,t),a.exports}t.m=e,n=[],t.O=(e,r,o,a)=>{if(!r){var A=1/0;for(c=0;c<n.length;c++){for(var[r,o,a]=n[c],i=!0,s=0;s<r.length;s++)(!1&a||A>=a)&&Object.keys(t.O).every(n=>t.O[n](r[s]))?r.splice(s--,1):(i=!1,a<A&&(A=a));if(i){n.splice(c--,1);var d=o();void 0!==d&&(e=d)}}return e}a=a||0;for(var c=n.length;c>0&&n[c-1][2]>a;c--)n[c]=n[c-1];n[c]=[r,o,a]},t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var r in e)t.o(e,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:e[r]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"==typeof window)return window}}(),t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),t.r=n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},(()=>{var n={792:0};t.O.j=e=>0===n[e];var e=(e,r)=>{var o,a,[A,i,s]=r,d=0;if(A.some(e=>0!==n[e])){for(o in i)t.o(i,o)&&(t.m[o]=i[o]);if(s)var c=s(t)}for(e&&e(r);d<A.length;d++)a=A[d],t.o(n,a)&&n[a]&&n[a][0](),n[a]=0;return t.O(c)},r=self.webpackChunknetease_mod_injector=self.webpackChunknetease_mod_injector||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})(),t.nc=void 0;var o=t.O(void 0,[96],()=>t(483));o=t.O(o)})();
//# sourceMappingURL=main.021057ea.js.map